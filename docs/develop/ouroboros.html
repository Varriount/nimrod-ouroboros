<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nimrod. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module ouroboros</title>
<style type="text/css">

span.DecNumber {color: blue}
span.BinNumber {color: blue}
span.HexNumber {color: blue}
span.OctNumber {color: blue}
span.FloatNumber {color: blue}
span.Identifier  {color: black}
span.Keyword {font-weight: bold}
span.StringLit {color: blue}
span.LongStringLit {color: blue}
span.CharLit {color: blue}
span.EscapeSequence {color: black}
span.Operator {color: black}
span.Punctuation {color: black}
span.Comment, span.LongComment {font-style:italic; color: green}
span.RegularExpression  {color: DarkViolet}
span.TagStart {color: DarkViolet}
span.TagEnd {color: DarkViolet}
span.Key  {color: blue}
span.Value  {color: black}
span.RawData {color: blue}
span.Assembler  {color: blue}
span.Preprocessor {color: DarkViolet}
span.Directive  {color: DarkViolet}
span.Command, span.Rule, span.Hyperlink, span.Label, span.Reference, 
span.Other  {color: black}

div.navigation {
  -moz-border-radius: 5px 5px 5px 5px;
  float: left; 
  width: 30%;
  margin: 0; padding: 0;
  border: 3px outset #7F7F7F;
  background-color: #7F7F7F;
}

div.navigation ul {
  list-style-type: none;
  padding-left: 1em;
}
div.navigation ul li a, div.navigation ul li a:visited {
  font-weight: bold;
  color: #FFFFFF;
  text-decoration: none;
}
div.navigation ul li a:hover {
  font-weight: bold;
  text-decoration: none;
  color: gold;
}

div.content {
  margin-left: 30%;
  padding: 0 1em;
  border-left: 4em;
}

dl.item dd, dl.item dd p {
  margin-top:3px;
}
dl.item dd pre {
  margin-left: 15pt;
  border: 0px;
}
dl.item dt, dl.item dt pre {
  margin:  20pt 0 0 5pt;
}

pre, span.tok {
  background-color: #F9F9F9;
  border-color: #C4C4C4;
  border-style: solid;
  border-width: 1px 1px 1px 2px;
  color: black;
  line-spacing: 110%;
  padding: 2px;
}

span.red {
  color: #A80000;
}

hr {background-color:#9D9D9D; border:0 none; color:#9D9D9D; height:1px; width:100%;}

/*
:Author: David Goodger
:Contact: goodger@python.org
:Date: Date: 2006-05-21 22:44:42 +0200 (Sun, 21 May 2006)
:Revision: Revision: 4564
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/
/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th { border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first { margin-top: 0 ! important }
.last, .with-subtitle { margin-bottom: 0 ! important }
.hidden { display: none }
a.toc-backref { text-decoration: none ; color: black }
blockquote.epigraph { margin: 2em 5em ; }
dl.docutils dd { margin-bottom: 0.5em }
div.abstract { margin: 2em 5em }
div.abstract p.topic-title { font-weight: bold ; text-align: center }
div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ; border: medium outset ; padding: 1em }
div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title { font-weight: bold ; font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title { color: red ; font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication { margin: 2em 5em ; text-align: center ; font-style: italic }
div.dedication p.topic-title { font-weight: bold ; font-style: normal }
div.figure { margin-left: 2em ; margin-right: 2em }
div.footer, div.header { clear: both; font-size: smaller }
div.line-block { display: block ; margin-top: 1em ; margin-bottom: 1em }
div.line-block div.line-block { margin-top: 0 ; margin-bottom: 0 ;
  margin-left: 1.5em }
div.sidebar { margin-left: 1em ; border: medium outset ;
  padding: 1em ; background-color: #ffffee ; /*width: 40% ;*/ float: right ;
  clear: right }

div.sidebar p.rubric { font-family: sans-serif ; font-size: medium }
div.system-messages { margin: 5em }
div.system-messages h1 { color: red }
div.system-message { border: medium outset ; padding: 1em }
div.system-message p.system-message-title { color: red ; font-weight: bold }
div.topic { margin: 2em;}
h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }
h1.title { text-align: center }
h2.subtitle { text-align: center }
/* hr.docutils { width: 75% } */
img.align-left { clear: left }
img.align-right { clear: right }
ol.simple, ul.simple { margin-bottom: 1em }
ol.arabic { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }
p.attribution { text-align: right ; margin-left: 50% }
p.caption { font-style: italic }
p.credits { font-style: italic ; font-size: smaller }
p.label { white-space: nowrap }
p.rubric { font-weight:bold;font-size:larger;color:maroon;text-align:center}
p.sidebar-title {font-family: sans-serif ;font-weight: bold ;font-size: larger }
p.sidebar-subtitle {font-family: sans-serif ; font-weight: bold }
p.topic-title {
font-weight: bold;
background-color: #6D6D6D;
border-bottom: 1px solid #000000;
border-top: 1px solid black;
color: white;
text-align: center;
margin: 0;
}
pre.address { margin-bottom: 0;margin-top:0;font-family:serif;font-size:100% }
pre.literal-block, pre.doctest-block {margin-left: 2em ;margin-right: 2em }
span.classifier {font-family: sans-serif;font-style: oblique }
span.classifier-delimiter {font-family: sans-serif;font-weight: bold }
span.interpreted {font-family: sans-serif }
span.option {white-space: nowrap }
span.pre {white-space: pre }
span.problematic {color: red }
span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation { border-left: solid 1px gray; margin-left: 1px }
table.docinfo {margin: 2em 4em }
table.docutils {margin-top: 0.5em;margin-bottom: 0.5em; border: 0 solid #9d9d9d; border-collapse: collapse; }
table.footnote {border-left: solid 1px black;margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {padding-left: 0.5em;padding-right: 0.5em;
  vertical-align: top;}

table.docutils td, table.docutils th { border-bottom:1px solid #9D9D9D; }
/* color: #4d4d4d} */

/* table.docutils td:hover, table.docinfo td:hover {color: #000000} */
  

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold;text-align: left;white-space: nowrap;padding-left: 0 }
  
table.docutils th
{
color: black;
font-weight:normal;
background-color: #E3E3E3;
border-top: 1px solid #1d1d1d;
border-bottom: 1px solid #1d1d1d;
}
  
h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {font-size: 100% }
ul.auto-toc { list-style-type: none }
/*a.reference { color: #E00000; font-weight:bold;}
a.reference:hover {color: #E00000;background-color: #ffff00;display: margin;
  font-weight:bold;}*/

</style>

</head>
<body>
<div class="document" id="documentId">
<h1 class="title">Module ouroboros</h1>
<div class="navigation" id="navigation">
<ul class="simple">
<li>
  <a class="reference" href="#6" id="56">Imports</a>
  <ul class="simple">
    
  </ul>
</li>
<li>
  <a class="reference" href="#7" id="57">Types</a>
  <ul class="simple">
      <li><a class="reference" href="#AppendedFormat"
    title="AppendedFormat* = enum 
  noData = 0, rawFormat = 1,  ## Simple BLOB, ouroboros doesn't touch it in any way.
  indexFormat = 2             ## Custom file tree index."><wbr />Appended<wbr />Format</a></li>
  <li><a class="reference" href="#AppendedData"
    title="AppendedData* = object 
  path*: string               ## Path to the binary with the appended data.
  fileSize*: int64            ## Total file size reported by the OS.
  contentSize*: int64         ## Amount of bytes for the original binary.
  dataSize*: int32            ## Length of the payload without metadataSize
  format*: AppendedFormat     ## Type of appended data.
  files: seq[AppendedFileInfo] ## List of files for indexFormat and above.
  fileTable: TTable[string, int] ## Maps vpath to files index.
  dirs: seq[string]           ## List of separate dirs, nil unless calculated."><wbr />Appended<wbr />Data</a></li>
  <li><a class="reference" href="#AppendedFileInfo"
    title="AppendedFileInfo* = object of Tobject
  name*: string               ## Full virtual path inside the appended data.
  offset*: int32              ## Offset of the file's payload inside the data.
  len*: int32                 ## Length of the file."><wbr />Appended<wbr />File<wbr />Info</a></li>
  <li><a class="reference" href="#PacketType"
    title="PacketType* = enum 
  endOfPackets = 0,           ## The end of it all. Noooooooo!
  dirPacket = 1,              ## Short directory packet follows.
  longDirPacket = 2,          ## Long directory packet follows.
  filePacket = 3,             ## File packet follows.
  longFilePacket = 4          ## Long file packet follows."><wbr />Packet<wbr />Type</a></li>

  </ul>
</li>
<li>
  <a class="reference" href="#10" id="60">Consts</a>
  <ul class="simple">
      <li><a class="reference" href="#versionStr"
    title="versionStr* = &quot;0.3.1&quot;"><wbr />version<wbr />Str</a></li>
  <li><a class="reference" href="#versionInt"
    title="versionInt* = (major: 0, minor: 3, maintenance: 1)"><wbr />version<wbr />Int</a></li>
  <li><a class="reference" href="#magicMarker"
    title="magicMarker*: array[4, uint8] = [uint8(0x000000F3), 0x0000006C, 0x00000068, 
                                 0x000000FB]"><wbr />magic<wbr />Marker</a></li>
  <li><a class="reference" href="#metadataSize"
    title="metadataSize* = 9"><wbr />metadata<wbr />Size</a></li>

  </ul>
</li>
<li>
  <a class="reference" href="#12" id="62">Procs</a>
  <ul class="simple">
      <li><a class="reference" href="#writeInt32M,TFile,int"
    title="writeInt32M*(file: TFile; value: int)"><wbr />write<wbr />Int32M</a></li>
  <li><a class="reference" href="#readInt32M,TFile"
    title="readInt32M*(file: TFile): int32"><wbr />read<wbr />Int32M</a></li>
  <li><a class="reference" href="#readInt16M,TFile"
    title="readInt16M*(file: TFile): int"><wbr />read<wbr />Int16M</a></li>
  <li><a class="reference" href="#readInt8,TFile"
    title="readInt8*(file: TFile): int"><wbr />read<wbr />Int8</a></li>
  <li><a class="reference" href="#expandFilename,AppendedData,string"
    title="expandFilename*(data: AppendedData; path: string): string"><wbr />expand<wbr />Filename</a></li>
  <li><a class="reference" href="#fileInfoList,AppendedData"
    title="fileInfoList*(data: AppendedData): seq[AppendedFileInfo]"><wbr />file<wbr />Info<wbr />List</a></li>
  <li><a class="reference" href="#fileInfo,AppendedData,string"
    title="fileInfo*(data: AppendedData; filename: string): AppendedFileInfo"><wbr />file<wbr />Info</a></li>
  <li><a class="reference" href="#getAppendedData,string"
    title="getAppendedData*(binaryFilename: string): AppendedData"><wbr />get<wbr />Appended<wbr />Data</a></li>
  <li><a class="reference" href="#existsFile,AppendedData,string"
    title="existsFile*(data: AppendedData; path: string): bool"><wbr />exists<wbr />File</a></li>
  <li><a class="reference" href="#string,AppendedData,string"
    title="string*(data: AppendedData; filename: string): string"><wbr />string</a></li>

  </ul>
</li>

</ul>
</div>
<div class="content" id="content">
<p>Code to read data from your own binary</p>
<p>This module provides basic tools to manipulate binary files to append random data to them. End user procs are provided to read this data later from your binary. In the future this proc may be used for things like <a class="reference external" href="http://forum.nimrod-code.org/t/194">http://forum.nimrod-code.org/t/194</a>.</p>
<p>Source code for this module may be found at <a class="reference external" href="https://github.com/gradha/nimrod-ouroboros">https://github.com/gradha/nimrod-ouroboros</a>.</p>

<div class="section" id="6">
<h1><a class="toc-backref" href="#56">Imports</a></h1>
<dl class="item">
<a class="reference external" href="os.html">os</a>, <a class="reference external" href="unsigned.html">unsigned</a>, <a class="reference external" href="tables.html">tables</a>, <a class="reference external" href="sets.html">sets</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#57">Types</a></h1>
<dl class="item">
<dt id="AppendedFormat"><a name="AppendedFormat"></a><pre><span class="Identifier">AppendedFormat</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">enum</span> 
  <span class="Identifier">noData</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">,</span> <span class="Identifier">rawFormat</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">,</span>  <span class="Comment">## Simple BLOB, ouroboros doesn't touch it in any way.</span>
  <span class="Identifier">indexFormat</span> <span class="Other">=</span> <span class="DecNumber">2</span>             <span class="Comment">## Custom file tree index.</span></pre></dt>
<dd>
No appended data or unsupported file format.

</dd>
<dt id="AppendedData"><a name="AppendedData"></a><pre><span class="Identifier">AppendedData</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">object</span> 
  <span class="Identifier">path</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>               <span class="Comment">## Path to the binary with the appended data.</span>
  <span class="Identifier">fileSize</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int64</span>            <span class="Comment">## Total file size reported by the OS.</span>
  <span class="Identifier">contentSize</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int64</span>         <span class="Comment">## Amount of bytes for the original binary.</span>
  <span class="Identifier">dataSize</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int32</span>            <span class="Comment">## Length of the payload without metadataSize</span>
  <span class="Identifier">format</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">AppendedFormat</span>     <span class="Comment">## Type of appended data.</span>
  <span class="Identifier">files</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">AppendedFileInfo</span><span class="Other">]</span> <span class="Comment">## List of files for indexFormat and above.</span>
  <span class="Identifier">fileTable</span><span class="Other">:</span> <span class="Identifier">TTable</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span> <span class="Comment">## Maps vpath to files index.</span>
  <span class="Identifier">dirs</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span>           <span class="Comment">## List of separate dirs, nil unless calculated.</span>
  </pre></dt>
<dd>
Information on a binary

</dd>
<dt id="AppendedFileInfo"><a name="AppendedFileInfo"></a><pre><span class="Identifier">AppendedFileInfo</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">Tobject</span>
  <span class="Identifier">name</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>               <span class="Comment">## Full virtual path inside the appended data.</span>
  <span class="Identifier">offset</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int32</span>              <span class="Comment">## Offset of the file's payload inside the data.</span>
  <span class="Identifier">len</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int32</span>                 <span class="Comment">## Length of the file.</span>
  </pre></dt>
<dd>

Provides information about an appended file.

</dd>
<dt id="PacketType"><a name="PacketType"></a><pre><span class="Identifier">PacketType</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">enum</span> 
  <span class="Identifier">endOfPackets</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">,</span>           <span class="Comment">## The end of it all. Noooooooo!</span>
  <span class="Identifier">dirPacket</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">,</span>              <span class="Comment">## Short directory packet follows.</span>
  <span class="Identifier">longDirPacket</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">,</span>          <span class="Comment">## Long directory packet follows.</span>
  <span class="Identifier">filePacket</span> <span class="Other">=</span> <span class="DecNumber">3</span><span class="Other">,</span>             <span class="Comment">## File packet follows.</span>
  <span class="Identifier">longFilePacket</span> <span class="Other">=</span> <span class="DecNumber">4</span>          <span class="Comment">## Long file packet follows.</span></pre></dt>
<dd>
Different packet types for the index.

</dd>

</dl></div>
<div class="section" id="10">
<h1><a class="toc-backref" href="#60">Consts</a></h1>
<dl class="item">
<dt id="versionStr"><a name="versionStr"></a><pre><span class="Identifier">versionStr</span><span class="Operator">*</span> <span class="Other">=</span> <span class="StringLit">&quot;0.3.1&quot;</span></pre></dt>
<dd>
Module version as a string.

</dd>
<dt id="versionInt"><a name="versionInt"></a><pre><span class="Identifier">versionInt</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Other">(</span><span class="Identifier">major</span><span class="Other">:</span> <span class="DecNumber">0</span><span class="Other">,</span> <span class="Identifier">minor</span><span class="Other">:</span> <span class="DecNumber">3</span><span class="Other">,</span> <span class="Identifier">maintenance</span><span class="Other">:</span> <span class="DecNumber">1</span><span class="Other">)</span></pre></dt>
<dd>
<p>
Module version as an integer tuple.</p>
<p>Major versions changes mean a break in API backwards compatibility, either through removal of symbols or modification of their purpose.</p>
<p>Minor version changes can add procs (and maybe default parameters). Minor odd versions are development/git/unstable versions. Minor even versions are public stable releases.</p>
<p>Maintenance version changes mean I'm not perfect yet despite all the kpop I watch.</p>


</dd>
<dt id="magicMarker"><a name="magicMarker"></a><pre><span class="Identifier">magicMarker</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="DecNumber">4</span><span class="Other">,</span> <span class="Identifier">uint8</span><span class="Other">]</span> <span class="Other">=</span> <span class="Other">[</span><span class="Identifier">uint8</span><span class="Other">(</span><span class="DecNumber">0x000000F3</span><span class="Other">)</span><span class="Other">,</span> <span class="DecNumber">0x0000006C</span><span class="Other">,</span> <span class="DecNumber">0x00000068</span><span class="Other">,</span> 
                                 <span class="DecNumber">0x000000FB</span><span class="Other">]</span></pre></dt>
<dd>

Magic signature found at the end of the file - 9 bytes.

</dd>
<dt id="metadataSize"><a name="metadataSize"></a><pre><span class="Identifier">metadataSize</span><span class="Operator">*</span> <span class="Other">=</span> <span class="DecNumber">9</span></pre></dt>
<dd>
Length of the magicMarker plus version and offset.

</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#62">Procs</a></h1>
<dl class="item">
<dt id="writeInt32M"><a name="writeInt32M,TFile,int"></a><pre><span class="Keyword">proc</span> <span class="Identifier">writeInt32M</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">file</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span></pre></dt>
<dd>
<p>Saves an int32 to the file. Raises EIO if the write had problems.</p>
<p>The integer is saved in motorola byte ordering (big endian), meaning first the MSB is written to the file.</p>


</dd>
<dt id="readInt32M"><a name="readInt32M,TFile"></a><pre><span class="Keyword">proc</span> <span class="Identifier">readInt32M</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">file</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int32</span></pre></dt>
<dd>
<p>Returns an int32 from the file.</p>
<p>The integer is expected to be in motorola byte ordering (big endian), meaning first the MSB is read from the file. Raises EIO if there was any problem.</p>


</dd>
<dt id="readInt16M"><a name="readInt16M,TFile"></a><pre><span class="Keyword">proc</span> <span class="Identifier">readInt16M</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">file</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>
<p>Returns an int16 from the file, or negative if there was an error.</p>
<p>The integer is expected to be in motorola byte ordering (big endian), meaning first the MSB is read from the file. Raises EIO if there was any problem.</p>


</dd>
<dt id="readInt8"><a name="readInt8,TFile"></a><pre><span class="Keyword">proc</span> <span class="Identifier">readInt8</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">file</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>
<p>Returns an int8 from the file.</p>
<p>Raises EIO if there was any problem.</p>


</dd>
<dt id="expandFilename"><a name="expandFilename,AppendedData,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">expandFilename</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">data</span><span class="Other">:</span> <span class="Identifier">AppendedData</span><span class="Other">;</span> <span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
<dd>
<p>Expands the relative path into a full path.</p>
<p>This proc will return always the input path if it starts with a path separator, since those are already absolute. For relative paths, it will search all the currently loaded directories and return the proper full path for the first match.</p>
<p>If the relative path doesn't exist in any directory, this proc returns the empty string.</p>


</dd>
<dt id="fileInfoList"><a name="fileInfoList,AppendedData"></a><pre><span class="Keyword">proc</span> <span class="Identifier">fileInfoList</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">data</span><span class="Other">:</span> <span class="Identifier">AppendedData</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">AppendedFileInfo</span><span class="Other">]</span></pre></dt>
<dd>
<p>Returns the list of files in the appended data.</p>
<p>May return nil if the AppendedData structure is not initialized or doesn't correspond to a file with indexFormat like content.</p>
<p>The files are returned in the same sequential order as they were read from the appended data index, the sort order is not guaranteed.</p>


</dd>
<dt id="fileInfo"><a name="fileInfo,AppendedData,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">fileInfo</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">data</span><span class="Other">:</span> <span class="Identifier">AppendedData</span><span class="Other">;</span> <span class="Identifier">filename</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">AppendedFileInfo</span></pre></dt>
<dd>
<p>Returns the file information for a single file.</p>
<p>This proc throws EInvalidKey if the filename is not in the appended data. The input filename will be passed through <tt class="docutils literal"><span class="pre">expandFilename</span></tt> first, so you can pass relative filenames directly to search for all possible paths.</p>


</dd>
<dt id="getAppendedData"><a name="getAppendedData,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">getAppendedData</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">binaryFilename</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">AppendedData</span></pre></dt>
<dd>
<p>Reads the specified filename and fills in the AppendedData object.</p>
<p>If the binary doesn't contain any appended data format will equal noData contentSize will equal fileSize. This proc will also load all the necessary index structures to access more complex file formats like indexFormat.</p>


</dd>
<dt id="existsFile"><a name="existsFile,AppendedData,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">existsFile</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">data</span><span class="Other">:</span> <span class="Identifier">AppendedData</span><span class="Other">;</span> <span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>
<p>Returns true if the path is listed in the appendeda data.</p>
<p>You can pass an absolute path or a relative one, which will be searched for using the <tt class="docutils literal"><span class="pre">expandFilename</span></tt> proc.</p>


</dd>
<dt id="string"><a name="string,AppendedData,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">string</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">data</span><span class="Other">:</span> <span class="Identifier">AppendedData</span><span class="Other">;</span> <span class="Identifier">filename</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
<dd>
<p>Retrieves a string from the appended data.</p>
<p>If the AppendedData doesn't contain any valid appended data, this proc raises EInvalidValue. If the specified filename is not found, it returns nil.</p>
<p>If the AppendedData.format is rawFormat the filename parameter is ignored and the whole data is always returned, so you can pass nil.</p>
<p>The input filename is passed in through the <tt class="docutils literal"><span class="pre">expandFilename</span></tt> proc first, so you can pass relative paths to search all the available directories.</p>


</dd>

</dl></div>

</div>

<small>Generated: 2014-05-31 21:19:51 UTC</small>
</div>
</body>
</html>
